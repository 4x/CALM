<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scripting Control</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link href="cssConsole.css" type="text/css" rel="stylesheet">
    <script src="cssConsole.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/default.css" />
    <link rel="stylesheet" type="text/css" href="css/component.css" />
    <script src="js/modernizr.custom.js"></script>
</head>
<body style="margin: 0px; background-color:black">
    <div style="margin-right: 0px; width: 135px; margin-left: auto;"><button class="md-trigger" data-modal="modal-1">Add Code</button></div>

    <div class="container" style="width: 100%;border: none; background-color:black; color: #21f838; font-size: 10; font-family:monospace">
        <div class="console">
            <div class="line white">[ALGO CONSOLE]</div>
        </div>
        <div class="bottom">
            <div class="label">></div>
            <div id="input" style="font-size: 10; font-family:monospace"></div>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            $('#input').find('input').focus();
        });


        $('#input').cssConsole({
            inputName:'console',
            onEnter: function(){
                addLine("> "+$('#input').find('input').val());
                execCommand($('#input').find('input').val());
                $('#input').cssConsole('reset');
                $('#input').find('input').focus();
            }
        });

        var lineLimit = 500;

        $('.container').on('click', function() {
            $('#input').find('input').focus();
        });

        function addLine(input) {
                if($('.console div').length==lineLimit) {
                    $('.console div').eq(0).remove();
                }
                $('.console').append('<div>'+input+'</div>');
                window.scrollTo(0,document.body.scrollHeight);
        }

        function execCommand(command){
            xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var lines = xmlhttp.responseText.split("\n");
                    for (var i = 0; i < lines.length; i++) {
                        addLine(lines[i]);
                    }
                }
            }
            xmlhttp.open("GET", "/scripting?CMD=" + command, true);
            xmlhttp.send();
        }
    </script>

    <div class="md-modal md-effect-1" id="modal-1">
        <div class="md-content">
            <h3>Add Code Here</h3>
            <div>
                <textarea id="output" style="width: 100%; height: 400px; resize: none; background-color: rgb(11, 14, 43);border: none; color: white"></textarea>
                <table><tr>
                    <td>
                        <button id="absorbCode">Absorb</button>
                    </td>
                    <td>
                        <button class="md-close">Close</button>
                    </td>
                </tr></table>
            </div>
        </div>
    </div>

    <div class="md-overlay"></div><!-- the overlay element -->

    <!-- classie.js by @desandro: https://github.com/desandro/classie -->
    <script src="js/classie.js"></script>
    <script src="js/modalEffects.js"></script>

    <!-- for the blur effect -->
    <!-- by @derSchepp https://github.com/Schepp/CSS-Filters-Polyfill -->
    <script>
			// this is important for IEs
			var polyfilter_scriptpath = '/js/';
		</script>
    <script src="js/cssParser.js"></script>
    <script src="js/css-filters-polyfill.js"></script>

</body></html>